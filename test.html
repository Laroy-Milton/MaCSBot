<!-- https://www.sitepoint.com/get-url-parameters-with-javascript/ -->
<html>
    <title>MaCS Discord Server Verification</title>
    <body>
        <h1>MaCS Discord Server Verification</h1>
        <script src="https://accounts.google.com/gsi/client" async defer></script>
        
        <div id="g_id_onload"
        data-client_id="634689683435-11kbdqo2t2nitg311c21pdcsaq68r9hl"
        data-callback="handleCredentialResponse">
        </div>
        <script>
        function handleCredentialResponse(response) {
            console.log(response.credential)

            const queryString = window.location.search;
            const urlParams = new URLSearchParams(queryString);
            const userID = urlParams.get('userid');

            console.log(userID);
            const params = { 
                'userid': userID,
                'cred': response.credential
            };
            const options = {
                method: 'POST',
                body: JSON.stringify(params),
                headers: {'Content-type': 'application/json'}
            };
            fetch('http://localhost:5500', options)
                // .then(response => response.json())
                .then(response => console.log(response));
        };
        </script>
        <!-- <div class=g_id_signin>Button</div> -->
    </body>
</html>

